<idea-plugin>
  <id>net.samcaldwell.latex</id>
  <name>LaTeX and Bibliography Manager</name>
  <vendor email="sam@example.com">Sam Caldwell</vendor>
  <description>
    LaTeX and Bibliography Manager: author LaTeX with live PDF preview and manage BibTeX entries with context-aware
    forms, validation, and flexible imports (DOI/URL/ISBN/Title/Author). Book/article lookups include OpenLibrary,
    Google Books, Crossref, WorldCat (OCLC Classify), British National Bibliography (BNB), openBD (Japan), and the US
    Library of Congress (LOC), plus PDF metadata extraction. Media lookups include OMDb, TMDb, and MusicBrainz. Includes
    templates and citation tooling for APA/MLA/Chicago contexts.

    Keywords: latex and bibliography manager, LaTeX, BibTeX, bibliography, citation, APA, MLA, Chicago, DOI, DOI.org,
              OpenLibrary, Google Books, Crossref, WorldCat, OCLC, BNB, openBD, Library of Congress, LOC, PDF,
              OMDb, TMDb, MusicBrainz.
  </description>

  <idea-version since-build="242"/>

  <depends>com.intellij.modules.platform</depends>

  <extensions defaultExtensionNs="com.intellij">
    <fileType name="LaTeX" language="LaTeX" extensions="tex" implementationClass="com.samcaldwell.latex.TexFileType"/>
    <fileType name="BibTeX" language="BibTeX" extensions="bib" implementationClass="com.samcaldwell.latex.BibFileType"/>

    <fileEditorProvider implementation="com.samcaldwell.latex.TexFileEditorProvider"/>

    <completion.contributor language="LaTeX" implementationClass="com.samcaldwell.latex.CitationCompletionContributor"/>

    <fileTemplateGroup implementation="com.samcaldwell.latex.TexFileTemplates"/>

    <projectService serviceImplementation="com.samcaldwell.latex.LatexCompilerService"/>
    <projectService serviceImplementation="com.samcaldwell.latex.BibLibraryService"/>

    <postStartupActivity implementation="com.samcaldwell.latex.CreateBibOnStartup"/>
    <postStartupActivity implementation="com.samcaldwell.latex.MissingCitationsWatcher"/>
    <postStartupActivity implementation="com.samcaldwell.latex.DependencyStartupActivity"/>

    <!-- Inject LaTeX language into Markdown ```latex code fences -->
    <multiHostInjector implementation="com.samcaldwell.latex.MarkdownLatexFenceInjector"/>

    <toolWindow id="Bibliography"
                anchor="right"
                factoryClass="com.samcaldwell.latex.BibliographyToolWindowFactory"
                icon="/icons/bib.svg"/>

    <applicationService serviceImplementation="com.samcaldwell.latex.LatexSecretsService"/>

    <applicationConfigurable id="com.samcaldwell.latex.Secrets"
                             displayName="LaTeX Tools (Secrets)"
                             instance="com.samcaldwell.latex.LatexSecretsConfigurable"/>

    <applicationConfigurable id="com.samcaldwell.latex.Dependencies"
                             displayName="LaTeX Tools (Dependencies)"
                             instance="com.samcaldwell.latex.DependenciesConfigurable"/>

    <applicationConfigurable id="com.samcaldwell.latex.LookupProviders"
                             displayName="LaTeX Tools (Lookup Providers)"
                             instance="com.samcaldwell.latex.LookupProvidersConfigurable"/>
  </extensions>

  <actions>
    <action id="com.samcaldwell.latex.RenderLatexFenceAction"
            class="com.samcaldwell.latex.RenderLatexFenceAction"
            text="Render LaTeX Code Fence"
            description="Compile and preview the current LaTeX code fence">
      <add-to-group group-id="EditorPopupMenu" anchor="last"/>
    </action>

    <action id="com.samcaldwell.latex.BibliographySetupAction"
            class="com.samcaldwell.latex.BibliographySetupAction"
            text="Insert Bibliography Setup"
            description="Insert biblatex setup and library.bib reference">
      <add-to-group group-id="EditorPopupMenu" anchor="last"/>
      <add-to-group group-id="ToolsMenu" anchor="last"/>
    </action>

    <action id="com.samcaldwell.latex.InstallDependenciesAction"
            class="com.samcaldwell.latex.InstallDependenciesAction"
            text="Install LaTeX Dependencies"
            description="Install required LaTeX tools (latexmk/pdflatex, biber) after consent">
      <add-to-group group-id="ToolsMenu" anchor="last"/>
    </action>
  </actions>
</idea-plugin>
